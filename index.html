<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Beach Volley Pro - Scheda Giocatore</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>Beach Volley Pro</h1>
  </header>

  <main id="container">
    <!-- Scheda iniziale -->
    <section class="scheda giocatore" data-id="0">
      <img src="default.png" alt="Giocatore" />
      <div class="valutazione">92</div>
      <h2>Nome Giocatore</h2>
      <div class="badge">üèê Attaccante</div>
      <div class="statistiche">
        <div class="stat"><span>Potenza Schiacciata</span><div class="bar"><div class="potenza-bar"></div></div></div>
        <div class="stat"><span>Precisione Servizio</span><div class="bar"><div class="precisione-bar"></div></div></div>
        <div class="stat"><span>Ricezione</span><div class="bar"><div class="ricezione-bar"></div></div></div>
        <div class="stat"><span>Muro</span><div class="bar"><div class="muro-bar"></div></div></div>
        <div class="stat"><span>Resistenza al Caldo</span><div class="bar"><div class="resistenza-bar"></div></div></div>
        <div class="stat"><span>Agilit√† sulla Sabbia</span><div class="bar"><div class="agilita-bar"></div></div></div>
      </div>
    </section>

    <!-- Slot per nuova scheda -->
    <div class="add-card" id="add-card">+</div>
  </main>

  <!-- Editor modale -->
  <section class="editor" id="editor" style="display: none;">
    <input type="text" id="nome" placeholder="Nome giocatore" />
    <input type="file" id="upload-img" accept="image/*" />
    <select id="ruolo">
      <option>Attaccante</option>
      <option>Difensore</option>
      <option>All-Rounder</option>
    </select>
    <label>Potenza Schiacciata</label><input type="range" id="potenza" min="0" max="100" value="90" />
    <label>Precisione Servizio</label><input type="range" id="precisione" min="0" max="100" value="85" />
    <label>Ricezione</label><input type="range" id="ricezione" min="0" max="100" value="95" />
    <label>Muro</label><input type="range" id="muro" min="0" max="100" value="78" />
    <label>Resistenza al Caldo</label><input type="range" id="resistenza" min="0" max="100" value="99" />
    <label>Agilit√† sulla Sabbia</label><input type="range" id="agilita" min="0" max="100" value="88" />
    <button id="applica">Applica Modifiche</button>
  </section>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const stats = ["potenza", "precisione", "ricezione", "muro", "resistenza", "agilita"];
      let currentCard = null;

      function updateBar(card, stat, value) {
        const bar = card.querySelector(`.${stat}-bar`);
        if (bar) bar.style.width = value + "%";
      }

      function openEditor(card) {
        currentCard = card;
        document.getElementById("editor").style.display = "block";
      }

      function closeEditor() {
        document.getElementById("editor").style.display = "none";
      }

      document.querySelectorAll(".scheda").forEach(card => {
        card.addEventListener("click", () => openEditor(card));
      });

      document.getElementById("add-card").addEventListener("click", () => {
        const newCard = document.createElement("section");
        newCard.className = "scheda giocatore";
        newCard.innerHTML = `
          <img src="default.png" alt="Giocatore" />
          <div class="valutazione">--</div>
          <h2>Nuovo Giocatore</h2>
          <div class="badge">üèê Ruolo</div>
          <div class="statistiche">
            ${stats.map(stat => `
              <div class="stat"><span>${stat}</span><div class="bar"><div class="${stat}-bar"></div></div></div>
            `).join("")}
          </div>
        `;
        newCard.addEventListener("click", () => openEditor(newCard));
        document.getElementById("container").insertBefore(newCard, document.getElementById("add-card"));
        openEditor(newCard);
      });

      document.getElementById("applica").addEventListener("click", () => {
        const nome = document.getElementById("nome").value;
        const ruolo = document.getElementById("ruolo").value;
        const fileInput = document.getElementById("upload-img");
        const file = fileInput.files[0];

        currentCard.querySelector("h2").textContent = nome || "Nome Giocatore";
        currentCard.querySelector(".badge").textContent = "üèê " + ruolo;

        stats.forEach(stat => {
          const value = document.getElementById(stat).value;
          updateBar(currentCard, stat, value);
        });

        if (file) {
          const reader = new FileReader();
          reader.onload = function (e) {
            const img = currentCard.querySelector("img");
            if (img) img.src = e.target.result;
          };
          reader.readAsDataURL(file);
        }

        closeEditor();
      });
    });
  </script>
</body>
</html>
